{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/bag.css' %}">
{% endblock %}

{% block content %}
    <div class="container justify-content-center mb-4">
        <div>
            <div class="row">
                <section id="home-hero">
                    <h2 class="display-4">My Orders</h2>              
                </section>
            </div>
        </div>
    </div>
    <div class="container py-5">
    {% if orders %}
    <div class="lt-card">
        <div class="table-responsive rounded-4 overflow-hidden">
        <table class="table table-sm table-hover lt-table align-middle m-0">
            <thead class="text-muted">
            <tr>
                <th class="ps-3">Order #</th>
                <th class="text-nowrap">Date</th>
                <th class="text-end">Items</th>
                <th class="text-end">Total</th>
                <th></th>
            </tr>
            </thead>
            <tbody class="tabular">
            {% for o in orders %}
                <tr onclick="window.location='{% url 'order_detail' o.order_number %}'" style="cursor:pointer;">
                <td class="ps-3"><code class="text-body">{{ o.order_number }}</code></td>
                <td class="text-nowrap">{{ o.date|date:"Y-m-d H:i" }}</td>
                <td class="text-end">{{ o.lineitems.count }} item{{ o.lineitems.count|pluralize }}</td>
                <td class="text-end">Â£{{ o.order_total|floatformat:2 }}</td>
                <td class="text-end">
                </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        </div>
    </div>
    {% else %}
    <div class="text-center text-muted py-5 lt-card">
        <p class="mb-3">No orders yet.</p>
        <a class="btn btn-lt" href="{% url 'pattern_list' %}">Browse patterns</a>
    </div>
    {% endif %}
    </div>
{% endblock %}
